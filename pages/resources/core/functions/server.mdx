import { Callout } from "nextra/components";

# Server

## Exports

<Callout type="info">
  called using `exports.qbx_core:<FunctionName>`
</Callout>

### CreateJobs

Add or overwrite jobs. This is a runtime only change and will not modify files.

```lua
---@param jobs table<string, Job>
```

### RemoveJob

Remove a job from memory. This is a runtime only change and will not modify files.

```lua
---@param jobName string
---@return boolean success
---@return string message
```

### CreateGangs

Add or overwrite gangs. This is a runtime only change and will not modify files.

```lua
---@param gangs table<string, Gang>
```

### RemoveGang

Remove a gang from memory. This is a runtime only change and will not modify files.

```lua
---@param gangName string
---@return boolean success
---@return string message
```

### GetCoreVersion

```lua
---@param InvokingResource string
---@return string version
```

### ExploitBan

```lua
---@param playerId Source server id
---@param origin string reason
```

### GetSource

```lua
---@param identifier string
---@return integer source of the player with the matching identifier or 0 if no player found
```

### GetPlayer

```lua
---@param source Source|string source or identifier of the player
---@return Player
```

### GetPlayerByCitizenId

```lua
---@param citizenid string
---@return Player?
```

### GetPlayerByPhone

```lua
---@param number string
---@return Player?
```

### GetQBPlayers

Will return an array of QB Player class instances, unlike the GetPlayers() wrapper which only returns IDs

```lua
---@return table<Source, Player>
```

### GetDutyCountJob

Gets a list of all on duty players of a specified job and the number

```lua
---@param job string name
---@return integer
---@return Source[]
```

### GetDutyCountType

Gets a list of all on duty players of a specified job type and the number

```lua
---@param type string
---@return integer
---@return Source[]
```

### GetBucketObjects

Returns the objects related to buckets, first returned value is the player buckets, second one is entity buckets

```lua
---@return table
---@return table
```

### SetPlayerBucket

Will set the provided player id / source into the provided bucket id

```lua
---@param source Source
---@param bucket integer
---@return boolean
```

### SetEntityBucket

Will set any entity into the provided bucket, for example peds / vehicles / props / etc.

```lua
---@param entity integer
---@param bucket integer
---@return boolean
```

### GetPlayersInBucket

Will return an array of all the player ids inside the current bucket

```lua
---@param bucket integer
---@return Source[]|boolean
```

### GetEntitiesInBucket

Will return an array of all the entities inside the current bucket (not for player entities, use GetPlayersInBucket for that)

```lua
---@param bucket integer
---@return boolean | integer[]
```

### CreateUseableItem

```lua
---@param item string name
---@param data fun(source: Source, item: unknown)
```

### CanUseItem

```lua
---@param item string name
---@return unknown
```

### IsWhitelisted

Check if player is whitelisted, kept like this for backwards compatibility or future plans

```lua
---@param source Source
---@return boolean
```

### AddPermission

```lua
---@param source Source
---@param permission string
```

### RemovePermission

```lua
---@param source Source
---@param permission string
```

### HasPermission

Checking for Permission Level

```lua
---@param source Source
---@param permission string
---@return boolean
```

### GetPermission

```lua
---@param source Source
---@return table<string, boolean>
```

### IsOptin

Get whether player is opted into admin reports or not

```lua
---@param source Source
---@return boolean
```

### ToggleOptin

Opt in or out of admin reports

```lua
---@param source Source
```

### IsPlayerBanned

Check if player is banned

```lua
---@param source Source
---@return boolean
---@return string? playerMessage
```

### Notify

Text box popup for player which dissappears after a set time.

```lua
---@param source
---@param text table|string text of the notification
---@param notifyType? NotificationType informs default styling. Defaults to 'inform'
---@param duration? integer milliseconds notification will remain on screen. Defaults to 5000
---@param subTitle? string extra text under the title
---@param notifyPosition? NotificationPosition
---@param notifyStyle? table Custom styling. Please refer too https://overextended.dev/ox_lib/Modules/Interface/Client/notify#libnotify
---@param notifyIcon? string Font Awesome 6 icon name
---@param notifyIconColor? string Custom color for the icon chosen before
```

### Login
Login an existing character or create a new one. This is the preferred function for creating characters if the owning player is online.

```lua
---@param source Source
---@param citizenid? string populated for existing characters only
---@param newData? PlayerEntity populated for new characters only
---@return boolean success
```

### GetOfflinePlayer

```lua
---@param citizenid string
---@return Player? if found in storage
```

### Logout
Logs player out of their current character

```lua
---@param source Source
```

### CreatePlayer
Creates a new character and saves in database.

```lua
---@param playerData PlayerData
---@param offline boolean
---@return Player player
```

### Save
Save player info to database

```lua
---@param source Source
```

### SaveOffline
Saves PlayerData to database

```lua
---@param playerData PlayerEntity
```

### DeleteCharacter
Delete a character permanently. This action cannot be undone.

```lua
---@param citizenid string
```

### GenerateUniqueIdentifier
Generate unique values for player identifiers

```lua
---@param type UniqueIdType The type of unique value to generate
---@return string | number UniqueVal unique value generated
```

## Module: utils

<Callout type="info">
  called using `<FunctionName>`
</Callout>

### SpawnVehicle

Deletes vehicle ped is in before spawning a new one

```lua
---@param source integer
---@param model string | integer
---@param coords? vector4 defaults to player's position
---@param warp? boolean
---@return integer? netId
```

### KickWithReason

Kick Player

```lua
---@param source Source
---@param reason string
---@param setKickReason? fun(reason: string)
---@param deferrals? Deferrals
```

### IsLicenseInUse

Check for duplicate license

```lua
---@param license string
---@return boolean
```